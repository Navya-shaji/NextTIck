<%- include ("../partials/user/header.ejs")  %>

    <!-- END nav -->

	<section id="home-section" class="hero">
			<div class="home-slider owl-carousel">
			<div class="slider-item js-fullheight">
				<div class="overlay"></div>
			  <div class="container-fluid p-0">
				<div class="row d-md-flex no-gutters slider-text align-items-center justify-content-end" data-scrollax-parent="true">
					<!-- <img class="one-third order-md-last img-fluid" src="/public/images/pexels-lilartsy-1374128.jpg" alt=""> -->
					<img class="img-fluid" src="/images/kylefromthenorth-TeOH1b-t3Nc-unsplash.jpg" alt="Watch Collection 2024">

					<div class="one-forth d-flex align-items-center ftco-animate" data-scrollax=" properties: { translateY: '70%' }">
						<div class="text">
							<span class="subheading">#New Arrival</span>
							<div class="horizontal">
							  <h1 class="mb-4 mt-3">Watch Collection 2024</h1>
							  <p class="mb-4">From sleek designs to understated elegance, NextTick offers minimalist watches that are crafted to complement your everyday style. Explore timepieces that are subtle yet captivating.</p>
							  
							  <p><a href="#" class="btn-custom">Discover Now</a></p>
							</div>
					  </div>
					</div>
				  </div>
			  </div>
			</div>
		  

	      <div class="slider-item js-fullheight">
	      	<div class="overlay"></div>
	        <div class="container-fluid p-0">
	          <div class="row d-flex no-gutters slider-text align-items-center justify-content-end" data-scrollax-parent="true">
				<img class="img-fluid" src="/images/zach-camp-09Bddzb7DWo-unsplash.jpg" alt="Watch Collection 2024">

		          <div class="one-forth d-flex align-items-center ftco-animate" data-scrollax=" properties: { translateY: '70%' }">
		          	<div class="text">
		          		<span class="subheading">#New Arrival</span>
		          		<div class="horizontal">
				            <h1 class="mb-4 mt-3">New watches Winter Collection</h1>
				            <p class="mb-4">From sleek designs to understated elegance, nextTick offers minimalist watches that are crafted to complement your everyday style. Explore timepieces that are subtle yet captivating.</p>
				            
				            <p><a href="#" class="btn-custom">Discover Now</a></p>
				          </div>
		            </div>
		          </div>
	        	</div>
	        </div>
	      </div>
	    </div>
    </section>

    <section class="ftco-section ftco-no-pt ftco-no-pb">
			<div class="container">
				<div class="row no-gutters ftco-services">
          <div class="col-lg-4 text-center d-flex align-self-stretch ftco-animate">
            <div class="media block-6 services p-4 py-md-5">
              <div class="icon d-flex justify-content-center align-items-center mb-4">
            		<span class="flaticon-bag"></span>
              </div>
              <div class="media-body">
                <h3 class="heading">Free Shipping</h3>
                <p>Across the seas and through the mists, lies a place where language itself dreams, where the blind texts live in serene oblivion.</p>
              </div>
            </div>      
          </div>
          <div class="col-lg-4 text-center d-flex align-self-stretch ftco-animate">
            <div class="media block-6 services p-4 py-md-5">
              <div class="icon d-flex justify-content-center align-items-center mb-4">
            		<span class="flaticon-customer-service"></span>
              </div>
              <div class="media-body">
                <h3 class="heading">Support Customer</h3>
                <p>In the quiet valleys of forgotten lands, beyond the reach of bustling towns, there dwell the tales untold.</p>
              </div>
            </div>    
          </div>
          <div class="col-lg-4 text-center d-flex align-self-stretch ftco-animate">
            <div class="media block-6 services p-4 py-md-5">
              <div class="icon d-flex justify-content-center align-items-center mb-4">
            		<span class="flaticon-payment-security"></span>
              </div>
              <div class="media-body">
                <h3 class="heading">Secure Payments</h3>
                <p>In the quiet valleys of forgotten lands, beyond the reach of bustling towns, there dwell the tales untold.</p>
              </div>
            </div>      
          </div>
        </div>
			</div>
		</section>

		
<section class="ftco-section bg-light">
  <div class="container">
    <div class="row justify-content-center mb-3 pb-3">
      <div class="col-md-12 heading-section text-center ftco-animate">
        <h2 class="mb-4">New Watches Arrival</h2>
        <p>"Time just got a style upgrade – discover our new arrivals and redefine every second."</p>
      </div>
    </div>   		
  </div>
  <div class="container">
    <div class="row">
      <% if (products && products.length > 0) { %>
        <% products.forEach(product => { %>
          <div class="col-sm-12 col-md-6 col-lg-3 ftco-animate d-flex">
            <div class="product d-flex flex-column">
              <a href="/productDetails?id=<%= product._id %>" class="img-prod">
                <img class="img-fluid" src="/uploads/re-image/<%= product.productImage[0] %>" alt="<%= product.productName %>">
                <% if (product.discount > 0) { %>
                  <span class="status"><%= product.discount %>% Off</span>
                <% } %>
                <div class="overlay"></div>
              </a>
              <div class="text py-3 pb-4 px-3">
                <div class="d-flex">
                  <div class="cat">
                    <span><%= product.category.name %></span>
                  </div>
                  <div class="rating">
                    <p class="text-right mb-0">
                      <% for (let i = 0; i < 5; i++) { %>
                        <a href="#"><span class="ion-ios-star<%= i < product.rating ? '' : '-outline' %>"></span></a>
                      <% } %>
                    </p>
                  </div>
                </div>
                <h3><a href="/productDetails?id=<%= product._id %>"><%= product.productName %></a></h3>
                <div class="pricing">
                  <% if (product.discount > 0) { %>
                    <p class="price">
                      <span class="mr-2 price-dc">₹<%= product.regularPrice.toFixed(2) %></span>
                      <span class="price-sale">₹<%= (product.regularPrice - (product.regularPrice * product.discount / 100)).toFixed(2) %></span>
                    </p>
                  <% } else { %>
                    <p class="price"><span>₹<%= product.regularPrice.toFixed(2) %></span></p>
                  <% } %>
                </div>
                <p class="bottom-area d-flex px-3">
                  <a href="#" class="add-to-cart text-center py-2 mr-1" onclick="addToCartHandler(event, '<%= product._id %>')">
                    <span>Add to cart <i class="ion-ios-add ml-1"></i></span>
                  </a>
                  <a href="#" class="buy-now text-center py-2">
                    Buy now <span><i class="ion-ios-cart ml-1"></i></span>
                  </a>
                </p>
              </div>
            </div>
          </div>
        <% }); %>
      <% } else { %>
        <p>No products available at the moment.</p>
      <% } %>
    </div>
  </div>
</section>

    <section class="ftco-section ftco-choose ftco-no-pb ftco-no-pt">
    	<div class="container">
				<div class="row no-gutters">
					<div class="col-lg-4">
						<div class="choose-wrap divider-one img p-5 d-flex align-items-end" style="background-image: url(images/wo1.jpg);">

    					<div class="text text-center text-white px-2">
								<span class="subheading">Men's watches</span>
    						<h2>Men's Collection</h2>
    						<p>Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
    						<p><a href="#" class="btn btn-black px-3 py-2">Shop now</a></p>
    					</div>
    				</div>
					</div>
					<div class="col-lg-8">
    				<div class="row no-gutters choose-wrap divider-two align-items-stretch">
    					<div class="col-md-12">
	    					<div class="choose-wrap full-wrap img align-self-stretch d-flex align-item-center justify-content-end" style="background-image: url(images/wo2.jpg);">
	    						<div class="col-md-7 d-flex align-items-center">
	    							<div class="text text-white px-5">
	    								<span class="subheading">Women's Watches</span>
			    						<h2>Women's Collection</h2>
			    						<p>Explore our timeless classics, crafted with precision and style, where innovation meets the art of watchmaking—your perfect companion awaits."</p>
			    						<p><a href="#" class="btn btn-black px-3 py-2">Shop now</a></p>
			    					</div>
	    						</div>
	    					</div>
	    				</div>
    					<div class="col-md-12">
    						<div class="row no-gutters">
    							<div class="col-md-6">
		    						<div class="choose-wrap wrap img align-self-stretch bg-light d-flex align-items-center">
		    							<div class="text text-center px-5">
		    								<span class="subheading">Summer Sale</span>
				    						<h2>Extra 50% Off</h2>
				    						<p>Discover timeless style this season! Dive into our exclusive collection of watches and save big on precision-crafted timepieces. Perfect for every moment, only while stocks last!</p>
				    						<p><a href="#" class="btn btn-black px-3 py-2">Shop now</a></p>
				    					</div>
		    						</div>
	    						</div>
	    						<div class="col-md-6">
		    						<div class="choose-wrap wrap img align-self-stretch d-flex align-items-center" style="background-image: url(images/wo4.jpg);">
		    							<div class="text text-center text-white px-5">
		    								<span class="subheading">Watches</span>
				    						<h2>Best Sellers</h2>
				    						<p>"Crafted to perfection, our best-selling watches stand at the crossroads of timeless design and modern innovation, where style meets precision by the endless sea of sophistication."</p>
				    						<p><a href="#" class="btn btn-black px-3 py-2">Shop now</a></p>
				    					</div>
		    						</div>
	    						</div>
	    					</div>
    					</div>
    				</div>
    			</div>
  			</div>
    	</div>
    </section>

   

    <section class="ftco-section testimony-section">
      <div class="container">
        <div class="row">
        	<div class="col-lg-5">
        		<div class="services-flow">
        			<div class="services-2 p-4 d-flex ftco-animate">
        				<div class="icon">
        					<span class="flaticon-bag"></span>
        				</div>
        				<div class="text">
	        				<h3>Free Shipping</h3>
	        				<p class="mb-0">Separated they live in. A small river named Duden flows</p>
        				</div>
        			</div>
        			<div class="services-2 p-4 d-flex ftco-animate">
        				<div class="icon">
        					<span class="flaticon-heart-box"></span>
        				</div>
        				<div class="text">
	        				<h3>Valuable Gifts</h3>
	        				<p class="mb-0">Separated they live in. A small river named Duden flows</p>
	        			</div>
        			</div>
        			<div class="services-2 p-4 d-flex ftco-animate">
        				<div class="icon">
        					<span class="flaticon-payment-security"></span>
        				</div>
        				<div class="text">
	        				<h3>All Day Support</h3>
	        				<p class="mb-0">Separated they live in. A small river named Duden flows</p>
	        			</div>
        			</div>
        			<div class="services-2 p-4 d-flex ftco-animate">
        				<div class="icon">
        					<span class="flaticon-customer-service"></span>
        				</div>
        				<div class="text">
	        				<h3>All Day Support</h3>
	        				<p class="mb-0">Separated they live in. A small river named Duden flows</p>
	        			</div>
        			</div>
        		</div>
        	</div>
          <div class="col-lg-7">
          	<div class="heading-section ftco-animate mb-5">
	            <h2 class="mb-4">Our satisfied customer says</h2>
	            <p>"Our satisfied customers share their stories: Far beyond the ordinary, where precision meets artistry, lies the perfect timepiece. Separated by miles but united by timeless style, our watches bring their moments to life."</p>
	          </div>
            <div class="carousel-testimony owl-carousel">
              <div class="item">
                <div class="testimony-wrap">
                  <div class="user-img mb-4" style="background-image: url(images/person_1.jpg)">
                    <span class="quote d-flex align-items-center justify-content-center">
                      <i class="icon-quote-left"></i>
                    </span>
                  </div>
                  <div class="text">
                    <p class="mb-4 pl-4 line">"Our satisfied customers say: Beyond the boundaries of time and trends, our watches bring elegance and precision to life. Crafted to perfection, they create connections that transcend distance and celebrate every moment."</p>
                    <p class="name">Garreth Smith</p>
                    <span class="position">Marketing Manager</span>
                  </div>
                </div>
              </div>
              <div class="item">
                <div class="testimony-wrap">
                  <div class="user-img mb-4" style="background-image: url(images/person_2.jpg)">
                    <span class="quote d-flex align-items-center justify-content-center">
                      <i class="icon-quote-left"></i>
                    </span>
                  </div>
                  <div class="text">
                    <p class="mb-4 pl-4 line">"Our satisfied customers say: Each timepiece is more than a watch—it's a story of precision, style, and unforgettable moments that stand the test of time."</p>
                    <p class="name">Garreth Smith</p>
                    <span class="position">Interface Designer</span>
                  </div>
                </div>
              </div>
              <div class="item">
                <div class="testimony-wrap">
                  <div class="user-img mb-4" style="background-image: url(images/person_3.jpg)">
                    <span class="quote d-flex align-items-center justify-content-center">
                      <i class="icon-quote-left"></i>
                    </span>
                  </div>
                  <div class="text">
                    <p class="mb-4 pl-4 line">"Our happy customers share: From cityscapes to distant horizons, our watches seamlessly blend timeless design with modern craftsmanship, becoming a part of life's most cherished memories."</p>
                    <p class="name">Garreth Smith</p>
                    <span class="position">UI Designer</span>
                  </div>
                </div>
              </div>
              <div class="item">
                <div class="testimony-wrap">
                  <div class="user-img mb-4" style="background-image: url(images/person_1.jpg)">
                    <span class="quote d-flex align-items-center justify-content-center">
                      <i class="icon-quote-left"></i>
                    </span>
                  </div>
                  <div class="text">
                    <p class="mb-4 pl-4 line">"What our customers love: Crafted with precision and passion, our watches don’t just measure time—they celebrate it, connecting moments across generations and distances."</p>
                    <p class="name">Garreth Smith</p>
                    <span class="position">Web Developer</span>
                  </div>
                </div>
              </div>
              <div class="item">
                <div class="testimony-wrap">
                  <div class="user-img mb-4" style="background-image: url(images/person_1.jpg)">
                    <span class="quote d-flex align-items-center justify-content-center">
                      <i class="icon-quote-left"></i>
                    </span>
                  </div>
                  <div class="text">
                    <p class="mb-4 pl-4 line">"Hear from our satisfied customers: Behind every dial lies a legacy of excellence, turning every tick into a timeless testament of style and functionality."</p>
                    <p class="name">Garreth Smith</p>
                    <span class="position">System Analyst</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="ftco-gallery">
    	<div class="container">
    		<div class="row justify-content-center">
    			<div class="col-md-8 heading-section text-center mb-4 ftco-animate">
            <h2 class="mb-4">Follow Us On Instagram</h2>
			<span class="icon-instagram"></span>
            <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in</p>
          </div>
    		</div>
    	</div>
    	<div class="container-fluid px-0">
    		<div class="row no-gutters">
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="images/" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/n4.jpg);">
						
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="images/w5" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/n2.avif);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="images/w13" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/n1.webp);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="images/w1" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/n3.avif);">
							<div class="icon mb-/4 d-flex align-items-center justify-content-center">
    						
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="images/w12" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/n9.jpg);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    					
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="images/w11" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/n7.jpg);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						
    					</div>
						</a>
					</div>
					
        </div>
    	</div>
    </section>

   
  <%- include ("../partials/user/footer.ejs")  %>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- Add to your head section -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<script>
 function addToCartHandler(event, productId) {
    event.preventDefault();

    fetch('/addToCart', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            productId: productId,
            quantity: 1
        })
    })
    .then(response => {
      alert(response)
      console.log(response)
        if (!response.ok) {
            return response.json().then(data => {
                throw new Error(data.message || 'Failed to add product to cart');
            });
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            // Show success message
            Swal.fire({
                title: 'Success!',
                text: data.message || 'Product added to cart successfully!',
                icon: 'success',
                showConfirmButton: false,
                timer: 1500
            }).then(() => {
                // Update cart count if available
                if (data.cartCount !== undefined) {
                    updateCartCount(data.cartCount);
                }
                
                // Redirect to cart page if specified
                if (data.redirect) {
                    window.location.href = data.redirect;
                }
            });
        } else {
            throw new Error(data.message || 'Failed to add product to cart');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        
        // Handle unauthorized/login required error
        if (error.message.includes('Please login')) {
            Swal.fire({
                title: 'Login Required',
                text: 'Please login to add items to your cart',
                icon: 'info',
                showCancelButton: true,
                confirmButtonText: 'Login',
                cancelButtonText: 'Cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/login';
                }
            });
        } 
        // Handle quantity limit error
        else if (error.message.includes('Maximum quantity')) {
            Swal.fire({
                title: 'Quantity Limit Reached',
                text: error.message,
                icon: 'warning',
                confirmButtonText: 'OK'
            });
        }
        // Handle out of stock error
        else if (error.message.includes('out of stock') || error.message.includes('available in stock')) {
            Swal.fire({
                title: 'Stock Limited',
                text: error.message,
                icon: 'warning',
                confirmButtonText: 'OK'
            });
        }
        // Handle other errors
        else {
            Swal.fire({
                title: 'Error!',
                text: error.message || 'Something went wrong. Please try again.',
                icon: 'error',
                confirmButtonText: 'OK'
            });
        }
    });
}

// Helper function to update cart count in the UI
function updateCartCount(count) {
    const cartCountElements = document.querySelectorAll('.cart-count');
    cartCountElements.forEach(element => {
        element.textContent = count;
    });
}

// Add this in your HTML head section if not already present
// <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  